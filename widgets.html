<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="widgets.css" />
    <title>Widgets</title>
  </head>

  <body class="bg-default">

    <nav class="navbar navbar-expand-sm " style="background-color:#0fd1b1;">
      <div class="container-fluid">
        <a class="navbar-brand" href="javascript:void(0)">BLYNK </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- <div class="date_time">
          <input type="date" class="date">  </input>
          <input type="time" class="time">  </input>
        </div> -->

        <div class="collapse navbar-collapse" id="mynavbar">        

          <ul id="appControl" class="navbar-nav ms-auto" style="align-items:center; ">                     
              <li  class="nav-item me-3">
                  <img id="device" src="./img/arduino.png" alt="ard" style="width:36px; text-align: center;" class="rounded-pill ">
              </li>              
              <li  class="nav-item me-3 ms-3">
                  <img id="start_stop" src="./img/stop.png" alt="stop" style="width:36px; text-align: center;" class="rounded-pill">
              </li>
              <li  class="nav-item me-3 ms-3">
                <img id="add_wgt" data-bs-toggle="offcanvas" data-bs-target="#demo" 
                src="./img/plus.png" alt="plus" style="width:32px; text-align: center;" class="rounded-pill invisible">
              </li>
          </ul>
     
        </div>

      </div>
    </nav>

    <ul class="nav nav-justified bg-dark">
      <li class="nav-item">
        <a class="nav-link active text-warning" href="/index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white" href="/widgets.html">Relays</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white" href="/sensors.html">Sensors</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white" href="/params.html">Params</a>
      </li>
    </ul>
    <br />

    <!-- /////////////////////////////////////  side panel  ///////////////////////////////////////////////// -->
    <div
      class="offcanvas offcanvas-end"
      data-bs-scroll="true"
      tabindex="-1"
      id="demo"
    >
      <div class="offcanvas-header bg-warning">
        <h2 class="offcanvas-title">Widget Box</h2>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
        ></button>
      </div>
      <div class="offcanvas-body">
        <p><img src="./img/button.png" /> Button</p>
        <p><img src="./img/button.png" /> Styled button</p>
        <p><img src="./img/button.png" /> Slider</p>
        <p><img src="./img/button.png" /> Timer</p>
        <p><img src="./img/button.png" /> Step</p>
        <p><img src="./img/button.png" /> Value display</p>
        <p><img src="./img/button.png" /> Labeled Value</p>
        <p><img src="./img/button.png" /> LED</p>
        <p><img src="./img/button.png" /> Gauge</p>
        <p><img src="./img/button.png" /> Chart</p>

        <button class="btn btn-secondary" type="button">A Button</button>
      </div>
    </div>

    <div id="container" class="container-sm ">   </div>
 
    <div id="container2" class="container-sm ">   </div>
    <br>
    
      <!-- <div class="row_item m-1 p-1">
        <button id="Mode 0" data-pin="V7" data-action="mode" data-mode="AUTO" class="btn btn-warning m-1">AUTO</button>
        <div class="cs-form btn-group p-1 m-0">
        <input type="time" id="onTime 0" class="form-control" value="18:00" data-time="18:00" onchange="time_handler(this)">
        <input type="time" id="offTime 4" class="form-control" value="23:15" data-time="23:15" onchange="time_handler(this)"> -->
     
      <!-- <div class=" btn btn-light ">
        <div class="led on m-1">          
        </div> 
      </div>-->
      <!-- <button data-action="toggle" data-pin="V8" data-state="1" id="Relay 4" class="btn btn-danger m-1">Relay 4 -->

          </button>
        </div>

    </div>
    <!-- 
    <form action="/index.html">
      <label for="customRange" class="form-label">Custom range</label>
      <input type="range" class="form-range" id="customRange" name="points">      
      <button type="submit" class="btn btn-primary mt-3">Submit</button>
    </form> -->

    <script src="widgets.js"></script>
    <script>
      let btn_ard = document.querySelector("#device");
      let btn_add = document.querySelector("#add_wgt");

      document.addEventListener("click", function (event) {
        let item = event.target;
        console.log("TARGET : ", item);

        if (item.id === "start_stop") {
          let curImg = item.getAttribute("src");

          if (curImg.includes("stop")) {
            item.setAttribute("src", "./img/play.png");
            btn_ard.classList.add("invisible");
            btn_add.classList.remove("invisible");
          } else if (curImg.includes("play")) {
            item.setAttribute("src", "./img/stop.png");
            btn_ard.classList.remove("invisible");
            btn_add.classList.add("invisible");
          }
        }

        if (item.id === "add_wgt") {
          console.log("add widget clicked!");
        }
      });

      function namePage() {
        let hr = window.location.href;
        let page = hr.substring(
          hr.lastIndexOf("/") + 1,
          hr.lastIndexOf(".html")
        );
        console.log("page:", page);
        return page;
      }
    </script>
  </body>
</html>

<!-- <div class="row_item">
            <button id="mode_1" class="btn">AUTO</button>           
            <div class="cs-form">
                <input type="time" class="form-control" value="" />
            </div>
            <div class="ledWidget">
                <span class="title_widget">Rel_1</span>
                <div class="led on"></div>
            </div>
            <button id="rel_1" class="btn">Relay 1</button>
        </div>        -->
